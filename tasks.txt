# Tomtom_optimizer is divided into 5-7 major parts 
1.api key's -- taken from tom tom(https://developer.tomtom.com/) which is used to for routing and geocoding api's (takes address/place name converts it into lat and long using tomtom geocoding api)
2.get routes (paths for driving car/bike) bike routing avaledhu soo car ki oka dhanike chesa, shows up multiple routes for user 
3. best departure time 
4. draw routes oon maps with different colors 

#streamlit - almost used all functions which is used in tomtom 

IMP__ tomtom is tken as backend logic and streamlit for frontend 



both tomtom and streamlit is divided into 4 parts:


Detailed Breakdown of Tasks & Code Ownership
###I. Female  1: Streamlit UI & Layout Specialist

Focus: Taking ownership of the user-facing part of the application, ensuring it's intuitive, visually appealing, and responsive. This role is highly visible and crucial for the app's presentation.

Key Files/Sections:

when2go_streamlit.py (Main entry point, responsible for integrating components from others)

Specific Functions/Code Lines:

st.set_page_config(...)

All st.markdown(...) for custom CSS and header/card styling. This includes defining the visual theme (dark mode, colors, fonts).

The initial st.columns([1, 3]) setup for main layout and any subsequent st.columns for internal layout within sections.

Input Widgets:

st.text_input("Enter starting location", ...)

st.text_input("Enter destination", ...)

st.selectbox("Travel Mode", ...)

st.checkbox("Find Best Departure Time?", ...)

st.radio("Route Priority", ...)

st.number_input("Window (mins)", ...)

st.number_input("Interval (mins)", ...)

st.button("ðŸš€ Find Optimal Departure", ...) (and its associated st.session_state['run_optimization'] trigger).

Basic display of map placeholder and the initial st_folium call:

st.info("Enter journey details...")

default_map = folium.Map(...)

st_folium(default_map, ...)

Displaying the selected route's summary information above the map.

Creating and managing the HTML & Streamlit integration for all interactive cards (both departure time cards and alternative route cards), including the custom HTML buttons and their corresponding hidden st.button logic.

All general informational/feedback messages using st.subheader, st.write, st.info, st.error.

### II. Male 1: TomTom API & Route Calculation Expert

Focus: The direct interface with the external TomTom services. This role requires careful attention to API documentation, request formatting, and robust error handling for external calls.

Key Files/Sections:

api_integrator.py (Suggested new file for modularity)

Specific Functions/Code Lines:

API_KEY = "YOUR_API_KEY" (Responsible for obtaining and securely setting this key).

geocode_location(location) function implementation:

Making the HTTP request to the Geocoding API.

Parsing the JSON response to extract latitude and longitude.

Error handling for API failures or no results.

get_routes(start_coords, end_coords, mode, depart_at=None, route_type="fastest") function implementation:

Constructing the URL and parameters for the Routing API request (traffic, routeType, travelMode, maxAlternatives).

Making the HTTP request.

Parsing the JSON response to extract the list of routes.

extract_route_points(route) function implementation (parsing route geometry from API response).

Implementing @st.cache_data decorators with appropriate ttl for geocode_location and get_routes to optimize API usage and performance.

###III. Female  2: Optimization Logic & Data Processing Lead

Focus: The "brain" of the optimization. This role involves complex looping, data aggregation, and structuring the data from the API calls in a way that is easily consumable by the UI and visualization components.

Key Files/Sections:

optimizer_logic.py (Suggested new file for modularity)

Integrates heavily with Male Lead 1's get_routes function.

Specific Functions/Code Lines:

find_best_departure_with_alternatives(...) function implementation:

Defining the logic for the time window and interval iteration.

Calling Male Lead 1's get_routes for each departure time.

Iterating through all alternatives received from get_routes and processing their travel_time_min, traffic_delay_min, distance_km, and route_points.

Structuring the all_departure_options list of dictionaries, where each dictionary represents a departure time and contains a list of its alternative routes.

Identifying the overall_best_idx (the best departure time based on primary route travel time).

Managing the st.session_state variables that hold the processed route data, specifically st.session_state.all_departure_options_df, and the indices for selected_departure_card_idx and selected_alternative_idx.

Implementing the Streamlit px.line chart for "Current Traffic Impact Trend (Primary Route)" and fig.add_vline for marking the best departure.

### IV. Male 2: Historical Data Management & Visualization Guru

Focus: Ensuring data persistence, managing the local CSV database, and creating informative visualizations of historical trends. This role combines data engineering with data visualization.

Key Files/Sections:

history_manager.py (Suggested new file for modularity)

Specific Functions/Code Lines:

Defining the HISTORY_FILE path.

initialize_history_file() function implementation (checks if CSV exists, creates if not).

save_journey_to_history(...) function implementation (appends new journey data to the CSV). This function would be called by Female Lead 1 or Female Lead 2 after a successful optimization.

load_history_for_route(...) function implementation (reads, filters, and prepares historical data from the CSV).

Implementing @st.cache_data for load_history_for_route with its ttl.

Managing the st.session_state['historical_data_needs_reload'] flag.

Data preprocessing for historical charts:

Converting departure_time_ist to datetime objects.

Extracting hour_of_day.

Performing groupby operations to calculate average travel times.

Implementing the Streamlit px.bar chart for "Average Travel Time by Time of Day".

Implementing the Streamlit px.line chart for "Traffic Delay Trends Over Time".

The draw_map function (for visualizing routes on Folium): While the UI specialist calls it, this person is responsible for the actual Folium map creation, adding markers, and drawing polylines for the selected route and any alternative routes, ensuring the map accurately reflects the geographical data.
